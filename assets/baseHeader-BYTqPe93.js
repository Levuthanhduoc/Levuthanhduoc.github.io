import{j as e,y as F,r as a,w as O,x as z,F as A,D as R,L as C}from"./index-Cv9YFUHF.js";import{c as y}from"./ButtonBase-CWY0ZXU-.js";import{u as U}from"./useTranslation-C8LIItbA.js";import{B as x}from"./Box-DYfF-kAN.js";import{T as I}from"./Typography-ChbdzV9x.js";import{D as $}from"./Divider-e-ED_quL.js";import{a as E}from"./listItemTextClasses-IG0vitKZ.js";import{L as k,a as w}from"./ListItemText-Dw1-YEF5.js";import{L as M,a as K,T as W,B as N,D as G,A as Y}from"./Toolbar-DhQZQmFm.js";import{I as J}from"./IconButton-tJSeIj4l.js";import{B as u}from"./Button-CIMELOzr.js";import{L as V}from"./Link-1h_JdM0P.js";import{M as q,a as f,b as Q,S as X}from"./Select-D8Y46EYu.js";import"./TransitionGroupContext-XsaPieWc.js";import"./dividerClasses-DHZn1Loq.js";import"./InputBase-CDKk_hus.js";import"./ownerWindow-kissE40c.js";import"./useTheme-Dg1_3p1T.js";import"./Paper-4L6SlS7R.js";import"./Portal-NobVQld7.js";import"./useSlotProps-BV855I_g.js";import"./utils-CyHbRDYB.js";import"./Slide-BTfXm24E.js";import"./iconButtonClasses-CwZoLDLp.js";import"./react-is.production.min-DUDD-a5e.js";import"./Fade-Ch_sSyno.js";import"./Grow-DQqxZq09.js";const Z=y(e.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),_=y(e.jsx("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 9c2.7 0 5.8 1.29 6 2v1H6v-.99c.2-.72 3.3-2.01 6-2.01m0-11C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PermIdentityOutlined"),ee=y(e.jsx("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2zM6.16 6h12.15l-2.76 5H8.53zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCartOutlined"),S=[{name:"button.shopPage",path:"/shop",alt:"Shop",icon:""},{name:"button.gamePage",path:"/game",alt:"Game",icon:""},{name:"button.tutorialPage",path:"/tutorial",alt:"Creator Lab",icon:""}],ne="ðŸ‡¬ðŸ‡§",te="ðŸ‡»ðŸ‡³",se=[{name:"en",icon:ne},{name:"vn",icon:te}];function B(){const t=document.cookie;return t==""?null:t.split(";").reduce((s,r)=>{const[m,c]=r.split("=");return s[m.replace(" ","")]=c,s},{})}const oe=240,ae="https://luckybrickserver.onrender.com/",re=t=>{const d=a.useRef(null),[h,s]=a.useState(!1),{setSnack:r,setLogin:m}=a.useContext(A),c=O(),l=()=>{s(!0)},j=async()=>{try{const i=await fetch(ae+"users/logout",{method:"POST",credentials:"include"});if(i.ok){const o=await i.json();if(o.status){const g=B();if(g){const b=new Date(Date.now()-1e3);for(const p in g)document.cookie=`${p}="";expires=${b};`}r({isOpen:!0,message:o.data.message[0]}),m(!1),s(!1),c("/")}else r({isOpen:!0,message:"Oop something happen please try again"})}}catch(i){console.log(i),r({isOpen:!0,message:"Oop something happen please try again"})}};return e.jsxs(e.Fragment,{children:[t.data&&t.data.name?e.jsx(u,{ref:d,sx:{minWidth:0,color:"#fff"},onClick:l,children:e.jsx(Y,{children:t.data.name[0]})}):e.jsx(C,{to:"/signin",children:e.jsx(u,{sx:{minWidth:0,color:"#fff"},children:e.jsx(_,{})})}),e.jsxs(q,{id:"basic-menu",anchorEl:d.current,open:h,onClose:()=>s(!1),MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(f,{onClick:()=>{console.log("a")},children:"Profile"}),e.jsx(f,{onClick:()=>{console.log("a")},children:"My account"}),e.jsx(f,{onClick:j,children:"Logout"})]})]})};function Te(){const{mode:t,setMode:d}=F(),[h,s]=a.useState(!1),[r,m]=a.useState("en"),c=O(),{t:l,i18n:{changeLanguage:j}}=U(),i=z(),[o,g]=a.useState(null),{isLogin:b,cart:p}=a.useContext(A),v=()=>{s(n=>!n)};t!="dark"&&d("dark");const L=()=>e.jsx(Q,{sx:{width:"50px"},variant:"standard",children:e.jsx(X,{labelId:"language-select",id:"language-select",value:r,onChange:n=>{m(n.target.value),j(n.target.value)},children:se.map(n=>e.jsx(f,{value:n.name,children:n.icon},n.name))})}),P=e.jsxs(x,{onClick:v,sx:{textAlign:"center"},children:[e.jsx(I,{variant:"h6",sx:{my:2},children:"LUCKY BRICK"}),e.jsx($,{}),e.jsxs(E,{children:[S.map(n=>e.jsx(k,{disablePadding:!0,children:e.jsx(M,{onClick:()=>c(n.path),sx:{textAlign:"center"},children:e.jsx(w,{primary:l(n.name)})})},n.alt)),o&&(o.role=="admin"?e.jsx(k,{sx:{textAlign:"center",display:"flex",justifyContent:"center"},disablePadding:!0,children:e.jsx(M,{onClick:()=>c("admin"),sx:{textAlign:"center"},children:e.jsx(w,{primary:l("Admin")})})}):""),e.jsx(k,{sx:{textAlign:"center",display:"flex",justifyContent:"center"},disablePadding:!0,children:e.jsx(L,{})})]})]}),D=window!==void 0?()=>window.document.body:void 0,T=()=>{const n=B();g(n)};return a.useEffect(()=>{T()},[b]),e.jsxs(x,{className:"app-header",sx:{display:"flex"},children:[e.jsx(R,{}),e.jsx(K,{className:"app-bar",sx:{background:"linear-gradient(to bottom,#0033A0, #001F3F)"},component:"nav",children:e.jsxs(W,{children:[e.jsx(J,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:v,sx:{mr:2,display:{sm:"none"}},children:e.jsx(Z,{})}),e.jsx(I,{variant:"h6",component:"div",sx:{flexGrow:1,display:"block"},children:"LUCKY BRICK"}),e.jsxs(x,{sx:{display:{xs:"none",sm:"block"}},children:[S.map((n,H)=>e.jsx(C,{to:n.path,children:e.jsx(u,{sx:{color:`${i.pathname==n.path?"#007bff":"#fff"}`},children:l(n.name)})},H+n.name)),o&&(o.role=="admin"?e.jsx(V,{href:"#admin",children:e.jsx(u,{sx:{color:`${i.pathname=="Admin"?"#007bff":"#fff"}`},children:l("Admin")})}):"")]}),e.jsxs(x,{sx:{display:"block"},children:[e.jsx(re,{data:o}),e.jsx(C,{to:"cart",children:e.jsx(u,{sx:{minWidth:0,color:"#fff"},children:e.jsx(N,{color:"secondary",badgeContent:p==null?void 0:p.length,max:999,children:e.jsx(ee,{})})})})]}),e.jsx(x,{sx:{display:{xs:"none",sm:"block"},marginLeft:"6px",textAlign:"center"},children:e.jsx(L,{})})]})}),e.jsx("nav",{children:e.jsx(G,{container:D,variant:"temporary",open:h,onClose:v,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:oe}},children:P})})]})}export{Te as default};
