import{r as n,j as k}from"./index-Cmwe-C8R.js";import{b as C,d as T}from"./IconButton-BfCg_MN7.js";import{g as b}from"./utils-DhY_fCm9.js";import{o as h}from"./ownerDocument-DW-IO8s5.js";function v(o){return o.substring(2).toLowerCase()}function w(o,s){return s.documentElement.clientWidth<o.clientX||s.documentElement.clientHeight<o.clientY}function A(o){const{children:s,disableReactTree:R=!1,mouseEvent:u="onClick",onClickAway:L,touchEvent:i="onTouchEnd"}=o,l=n.useRef(!1),c=n.useRef(null),f=n.useRef(!1),d=n.useRef(!1);n.useEffect(()=>(setTimeout(()=>{f.current=!0},0),()=>{f.current=!1}),[]);const g=C(b(s),c),a=T(e=>{const t=d.current;d.current=!1;const r=h(c.current);if(!f.current||!c.current||"clientX"in e&&w(e,r))return;if(l.current){l.current=!1;return}let E;e.composedPath?E=e.composedPath().includes(c.current):E=!r.documentElement.contains(e.target)||c.current.contains(e.target),!E&&(R||!t)&&L(e)}),p=e=>t=>{d.current=!0;const r=s.props[e];r&&r(t)},m={ref:g};return i!==!1&&(m[i]=p(i)),n.useEffect(()=>{if(i!==!1){const e=v(i),t=h(c.current),r=()=>{l.current=!0};return t.addEventListener(e,a),t.addEventListener("touchmove",r),()=>{t.removeEventListener(e,a),t.removeEventListener("touchmove",r)}}},[a,i]),u!==!1&&(m[u]=p(u)),n.useEffect(()=>{if(u!==!1){const e=v(u),t=h(c.current);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}},[a,u]),k.jsx(n.Fragment,{children:n.cloneElement(s,m)})}export{A as C};
