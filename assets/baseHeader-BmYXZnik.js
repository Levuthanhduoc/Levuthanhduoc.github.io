import{j as e,r as o,w as I,x as P,F as w,D,L as v}from"./index-Dy-TX3gv.js";import{c as C}from"./ButtonBase-CHdZHK7o.js";import{u as T}from"./useTranslation-BCQuw7L1.js";import{B as x}from"./Box-Bze56fmY.js";import{T as k}from"./Typography-B0J-dAWc.js";import{D as H}from"./Divider-Dn4Zsdvv.js";import{a as F,B as h}from"./listItemTextClasses-CfvzkZBg.js";import{L as y,a as z}from"./ListItemText-B8f160tU.js";import{L as R,a as U,T as $,B as E,D as K,A as W}from"./Toolbar-CFfCEjJJ.js";import{I as N}from"./IconButton-EIsY4EBA.js";import{L as G}from"./Link-Dgp_U8kC.js";import{M as Y,a as b,b as J,S as V}from"./Select-B5fA5xJp.js";import"./TransitionGroupContext-Z5cKEwOP.js";import"./dividerClasses-CRnXGbFn.js";import"./InputBase-2TkCBngh.js";import"./ownerWindow-1p4bbeQI.js";import"./useTheme-C5fwKPZq.js";import"./Paper-ChmGAb-A.js";import"./Portal-x49v2FTs.js";import"./useSlotProps-Cb_3iaYJ.js";import"./utils-DxtO0HGO.js";import"./Slide-CBeHp4Ff.js";import"./iconButtonClasses-Bf4YZwk4.js";import"./react-is.production.min-DUDD-a5e.js";import"./Fade-BjMHVi4E.js";import"./Grow-CEVZ8JVQ.js";const q=C(e.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),Q=C(e.jsx("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 9c2.7 0 5.8 1.29 6 2v1H6v-.99c.2-.72 3.3-2.01 6-2.01m0-11C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PermIdentityOutlined"),X=C(e.jsx("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2zM6.16 6h12.15l-2.76 5H8.53zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCartOutlined"),L=[{name:"button.shopPage",path:"/shop",alt:"Shop",icon:""},{name:"button.gamePage",path:"/game",alt:"Game",icon:""},{name:"button.tutorialPage",path:"/tutorial",alt:"Creator Lab",icon:""}],Z="ðŸ‡¬ðŸ‡§",_="ðŸ‡»ðŸ‡³",ee=[{name:"en",icon:Z},{name:"vn",icon:_}];function M(){const t=document.cookie;return t==""?null:t.split(";").reduce((s,a)=>{const[r,d]=a.split("=");return s[r.replace(" ","")]=d,s},{})}const ne=240,te="http://localhost:3000/",se=t=>{const l=o.useRef(null),[u,s]=o.useState(!1),{setSnack:a,setLogin:r}=o.useContext(w),d=I(),g=()=>{s(!0)},m=async()=>{try{const i=await fetch(te+"users/logout",{method:"POST",credentials:"include"});if(i.ok){const f=await i.json();if(f.status){const c=M();if(c){const p=new Date(Date.now()-1e3);for(const j in c)document.cookie=`${j}="";expires=${p};`}a({isOpen:!0,message:f.data.message[0]}),r(!1),s(!1),d("/")}else a({isOpen:!0,message:"Oop something happen please try again"})}}catch(i){console.log(i),a({isOpen:!0,message:"Oop something happen please try again"})}};return e.jsxs(e.Fragment,{children:[t.data&&t.data.name?e.jsx(h,{ref:l,sx:{minWidth:0,color:"#fff"},onClick:g,children:e.jsx(W,{children:t.data.name[0]})}):e.jsx(v,{to:"/signin",children:e.jsx(h,{sx:{minWidth:0,color:"#fff"},children:e.jsx(Q,{})})}),e.jsxs(Y,{id:"basic-menu",anchorEl:l.current,open:u,onClose:()=>s(!1),MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(b,{onClick:()=>{console.log("a")},children:"Profile"}),e.jsx(b,{onClick:()=>{console.log("a")},children:"My account"}),e.jsx(b,{onClick:m,children:"Logout"})]})]})};function Be(){const[t,l]=o.useState(!1),[u,s]=o.useState("en"),a=I(),{t:r,i18n:{changeLanguage:d}}=T(),g=P(),[m,i]=o.useState(null),{isLogin:f,cart:c}=o.useContext(w),p=()=>{l(n=>!n)},j=()=>e.jsx(J,{sx:{width:"50px"},variant:"standard",children:e.jsx(V,{labelId:"language-select",id:"language-select",value:u,onChange:n=>{s(n.target.value),d(n.target.value)},children:ee.map(n=>e.jsx(b,{value:n.name,children:n.icon},n.name))})}),O=e.jsxs(x,{onClick:p,sx:{textAlign:"center"},children:[e.jsx(k,{variant:"h6",sx:{my:2},children:"LUCKY BRICK"}),e.jsx(H,{}),e.jsxs(F,{children:[L.map(n=>e.jsx(y,{disablePadding:!0,children:e.jsx(R,{onClick:()=>a(n.path),sx:{textAlign:"center"},children:e.jsx(z,{primary:r(n.name)})})},n.alt)),e.jsx(y,{sx:{textAlign:"center",display:"flex",justifyContent:"center"},disablePadding:!0,children:e.jsx(j,{})})]})]}),S=window!==void 0?()=>window.document.body:void 0,B=()=>{const n=M();i(n)};return o.useEffect(()=>{B()},[f]),e.jsxs(x,{className:"app-header",sx:{display:"flex"},children:[e.jsx(D,{}),e.jsx(U,{className:"app-bar",sx:{background:"linear-gradient(to bottom,#0033A0, #001F3F)"},component:"nav",children:e.jsxs($,{children:[e.jsx(N,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:p,sx:{mr:2,display:{sm:"none"}},children:e.jsx(q,{})}),e.jsx(k,{variant:"h6",component:"div",sx:{flexGrow:1,display:"block"},children:"LUCKY BRICK"}),e.jsxs(x,{sx:{display:{xs:"none",sm:"block"}},children:[L.map((n,A)=>e.jsx(v,{to:n.path,children:e.jsx(h,{sx:{color:`${g.pathname==n.path?"#007bff":"#fff"}`},children:r(n.name)})},A+n.name)),m&&(m.role=="admin"?e.jsx(G,{href:"/admin",children:e.jsx(h,{sx:{color:`${g.pathname=="Admin"?"#007bff":"#fff"}`},children:r("Admin")})}):"")]}),e.jsxs(x,{sx:{display:"block"},children:[e.jsx(se,{data:m}),e.jsx(v,{to:"cart",children:e.jsx(h,{sx:{minWidth:0,color:"#fff"},children:e.jsx(E,{color:"secondary",badgeContent:c==null?void 0:c.length,max:999,children:e.jsx(X,{})})})})]}),e.jsx(x,{sx:{display:{xs:"none",sm:"block"},marginLeft:"6px",textAlign:"center"},children:e.jsx(j,{})})]})}),e.jsx("nav",{children:e.jsx(K,{container:S,variant:"temporary",open:t,onClose:p,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:ne}},children:O})})]})}export{Be as default};
