import{l as O,n as W,s as y,G as L,r as n,e as R,j as e,f as M,h as P,F as q,w as z,D as J}from"./index-B5PSuXle.js";import{c as V,g as G,a as H,b as Z,D as K}from"./DialogContent-DIsjvjjw.js";import{T as g}from"./Typography-irQx7erz.js";import{O as Q,b as T}from"./Select-DE98KGZg.js";import{B as j}from"./Button-CeCSRBEm.js";import{A as X}from"./AppTheme-BOnx29iA.js";import{C as Y}from"./ColorModeSelect-CQN_8U_-.js";import{B as w}from"./Box-JrXOHGye.js";import{a as k,T as E}from"./TextField-na63-en_.js";import{L as F}from"./Link-BimjQKDu.js";import{F as _,C as ee}from"./FormControlLabel-D-hd0SIw.js";import{C as te}from"./Card-BCnQsdpw.js";import{S as se}from"./Stack-CdiHnTB8.js";import"./useTheme-DQ6g_iut.js";import"./Paper-DtIi--Wq.js";import"./Portal-UJl58K2G.js";import"./useSlotProps-Co3L6F-D.js";import"./TransitionGroupContext-BwecBOE4.js";import"./utils-gPcl1OAD.js";import"./ButtonBase-CyF330Rm.js";import"./Fade-CEdQO61r.js";import"./InputBase-BIDzIriS.js";import"./ownerWindow-uoHU8f8q.js";import"./listItemTextClasses-_Xh5eGTp.js";import"./dividerClasses-CnPk_95J.js";import"./react-is.production.min-DUDD-a5e.js";import"./Grow-Co2mW0iA.js";import"./toggleButtonClasses-D087AWxR.js";import"./iconButtonClasses-BsB7l38x.js";import"./tabClasses-DiQmeQ8Z.js";import"./checkboxClasses-CbagfT0a.js";import"./useThemeProps-ColQetrh.js";function oe(t){return W("MuiDialogContentText",t)}O("MuiDialogContentText",["root"]);const re=t=>{const{classes:s}=t,o=P({root:["root"]},oe,s);return{...s,...o}},ae=y(g,{shouldForwardProp:t=>L(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,s)=>s.root})({}),ne=n.forwardRef(function(s,r){const o=R({props:s,name:"MuiDialogContentText"}),{children:m,className:u,...p}=o,i=re(p);return e.jsx(ae,{component:"p",variant:"body1",color:"textSecondary",ref:r,ownerState:p,className:M(i.root,u),...o,classes:i})}),ie=t=>{const{classes:s}=t;return P({root:["root"]},G,s)},le=y(g,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,s)=>s.root})({padding:"16px 24px",flex:"0 0 auto"}),pe=n.forwardRef(function(s,r){const o=R({props:s,name:"MuiDialogTitle"}),{className:m,id:u,...p}=o,i=o,h=ie(i),{titleId:C=u}=n.useContext(V);return e.jsx(le,{component:"h2",className:M(h.root,m),ownerState:i,ref:r,variant:"h6",id:u??C,...p})});function ce({open:t,handleClose:s}){return e.jsxs(H,{open:t,onClose:s,PaperProps:{component:"form",onSubmit:r=>{r.preventDefault(),s()},sx:{backgroundImage:"none"}},children:[e.jsx(pe,{children:"Reset password"}),e.jsxs(Z,{sx:{display:"flex",flexDirection:"column",gap:2,width:"100%"},children:[e.jsx(ne,{children:"Enter your account's email address, and we'll send you a link to reset your password."}),e.jsx(Q,{autoFocus:!0,required:!0,margin:"dense",id:"email",name:"email",label:"Email address",placeholder:"Email address",type:"email",fullWidth:!0})]}),e.jsxs(K,{sx:{pb:3,px:3},children:[e.jsx(j,{onClick:s,children:"Cancel"}),e.jsx(j,{variant:"contained",type:"submit",children:"Continue"})]})]})}const de="https://useful-rivalee-levutanhduoc-0dfdb3a6.koyeb.app/",ue=y(te)(({theme:t})=>({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",padding:t.spacing(4),gap:t.spacing(2),margin:"auto",[t.breakpoints.up("sm")]:{maxWidth:"450px"},boxShadow:"hsla(220, 30%, 5%, 0.05) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.05) 0px 15px 35px -5px",...t.applyStyles("dark",{boxShadow:"hsla(220, 30%, 5%, 0.5) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.08) 0px 15px 35px -5px"})})),me=y(se)(({theme:t})=>({height:"calc((1 - var(--template-frame-height, 0)) * 100dvh)",minHeight:"100%",padding:t.spacing(2),[t.breakpoints.up("sm")]:{padding:t.spacing(4)},"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...t.applyStyles("dark",{backgroundImage:"none"})}}));function Ge(t){const[s,r]=n.useState(null),[o,m]=n.useState(!1),[u,p]=n.useState(""),[i,h]=n.useState(!1),[C,b]=n.useState(""),[I,D]=n.useState(!1),{setLogin:U}=n.useContext(q),S=z(),B=()=>{D(!0)},N=()=>{D(!1)},$=async c=>{let a=[];if(c.preventDefault(),o||i)return;const f=new FormData(c.currentTarget),x=JSON.stringify({name:f.get("username"),password:f.get("password")});try{const d=await fetch(de+"users/login",{method:"POST",body:x,credentials:"include",headers:{"Content-Type":"application/json"}});if(d.ok){const l=await d.json();if(l.status){const v=new Date(Date.now()+828e5);document.cookie=`name=${l.data.name};expires=${v};`,document.cookie=`role=${l.data.role};expires=${v};`,U(!0),S("/");return}else a=[...a,...l.data.message]}}catch(d){let l="";typeof d=="string"?l=d.toUpperCase():d instanceof Error&&(l=d.message),a.push(l)}a.length>0&&r(a)},A=()=>{const c=document.getElementById("username"),a=document.getElementById("password"),f=new RegExp(/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*\W)(?!.* ).{8,16}$/);let x=!0;return r(null),!c.value||c.value.length<=3?(m(!0),p("Please enter a valid username with more than 3 character"),x=!1):(m(!1),p("")),!a.value||!f.test(a.value)?(h(!0),b("Password must have 8 to 16 character long. At least 1 number, 1 uppercase, 1 lowercase 1 special character. No space."),x=!1):(h(!1),b("")),x};return e.jsxs(X,{...t,children:[e.jsx(J,{enableColorScheme:!0}),e.jsxs(me,{direction:"column",justifyContent:"space-between",children:[e.jsx(Y,{sx:{position:"fixed",top:"1rem",right:"1rem"}}),e.jsxs(ue,{variant:"outlined",children:[e.jsx(g,{component:"h1",variant:"h4",sx:{width:"100%",fontSize:"clamp(2rem, 10vw, 2.15rem)"},children:"Sign in"}),s&&e.jsx(w,{sx:{color:"rgb(145, 8, 8)"},children:s.map((c,a)=>e.jsx(g,{children:c},a))}),e.jsxs(w,{component:"form",onSubmit:$,noValidate:!0,sx:{display:"flex",flexDirection:"column",width:"100%",gap:2},children:[e.jsxs(T,{children:[e.jsx(k,{htmlFor:"username",children:"Username"}),e.jsx(E,{error:o,helperText:u,id:"username",type:"username",name:"username",placeholder:"Jonh",autoComplete:"username",autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",color:o?"error":"primary"})]}),e.jsxs(T,{children:[e.jsxs(w,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(k,{htmlFor:"password",children:"Password"}),e.jsx(F,{component:"button",type:"button",onClick:B,variant:"body2",sx:{alignSelf:"baseline"},children:"Forgot your password?"})]}),e.jsx(E,{error:i,helperText:C,name:"password",placeholder:"••••••",type:"password",id:"password",autoComplete:"current-password",autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",color:i?"error":"primary"})]}),e.jsx(_,{control:e.jsx(ee,{value:"remember",color:"primary"}),label:"Remember me"}),e.jsx(ce,{open:I,handleClose:N}),e.jsx(j,{type:"submit",fullWidth:!0,variant:"contained",onClick:A,children:"Sign in"}),e.jsxs(g,{sx:{textAlign:"center"},children:["Don't have an account?"," ",e.jsx("span",{style:{cursor:"pointer"},onClick:()=>S("/signup"),children:e.jsx(F,{variant:"body2",sx:{alignSelf:"center"},children:"Sign up"})})]})]})]})]})]})}export{Ge as default};
