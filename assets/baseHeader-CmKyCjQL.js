import{j as e,r as s,o as A,q as ee,p as te,A as N,C as ne,L as v}from"./index-I3WCFbXW.js";import{c as h,I as C}from"./IconButton-BvJRnmLf.js";import{S as U}from"./Stack-Ss0VG_D_.js";import{B as i}from"./Box-DNtV_4QE.js";import{T as x}from"./Typography-BVHtj-9O.js";import{C as se}from"./component.module-BD0YSLJX.js";import{i as oe}from"./isSale-D05GErbs.js";import{f as re}from"./fecthData-9SLkk-nw.js";import{b as G,M as ae,a as k,S as ie}from"./Select-BdJCyDMf.js";import{T as ce}from"./TextField-BBZMfPd-.js";import{I as le}from"./InputAdornment-CYU1vYwm.js";import{D as I}from"./Divider-B_qJNzeC.js";import{L as de}from"./LinearProgress-7A-sFX5T.js";import{v as T}from"./v4-Ch9TGLTe.js";import{u as xe}from"./useTranslation-CiQXBwnT.js";import{a as me}from"./listItemTextClasses-CiOVZ1QG.js";import{L,a as $}from"./ListItemText-DGGL1cRU.js";import{L as B,a as O,T as pe,B as R,D as V,A as he}from"./Toolbar-B6AVipwz.js";import{B as j}from"./Button-DCQXrtrW.js";import{L as W}from"./Link-DoDuPMP_.js";import{S as ue}from"./Slide-fchKdBry.js";import"./useThemeProps-B6AQUXeY.js";import"./isMuiElement-DmcSjKRo.js";import"./dividerClasses-GL_stfPR.js";import"./react-is.production.min-DUDD-a5e.js";import"./Backdrop-BzKM5jQo.js";import"./utils-DHAL--83.js";import"./useTheme-BtXiHbqi.js";import"./ownerWindow-BN2rbQ_G.js";import"./ownerDocument-DW-IO8s5.js";import"./Paper-DxTlVd1j.js";import"./Grow-CZOuELKs.js";import"./useSlotProps-BxS31xzD.js";import"./useControlled-ptgeMyCW.js";const fe=h([e.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),e.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")],"AdminPanelSettings"),ge=h(e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),je=h(e.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),be=h([e.jsx("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1m0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5z"},"0"),e.jsx("path",{d:"M17.5 10.5c.88 0 1.73.09 2.5.26V9.24c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99M13 12.49v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26V11.9c-.79-.15-1.64-.24-2.5-.24-1.7 0-3.24.3-4.5.83m4.5 1.84c-1.7 0-3.24.29-4.5.83v1.66c1.13-.64 2.7-.99 4.5-.99.88 0 1.73.09 2.5.26v-1.52c-.79-.16-1.64-.24-2.5-.24"},"1")],"MenuBook"),ve=h(e.jsx("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 9c2.7 0 5.8 1.29 6 2v1H6v-.99c.2-.72 3.3-2.01 6-2.01m0-11C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"}),"PermIdentityOutlined"),K=h(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),E=h(e.jsx("path",{d:"M15.55 13c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.37-.66-.11-1.48-.87-1.48H5.21l-.94-2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2zM6.16 6h12.15l-2.76 5H8.53zM7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2"}),"ShoppingCartOutlined"),Se=h(e.jsx("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"}),"Storefront"),Ce=h(e.jsx("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-10 7H8v3H6v-3H3v-2h3V8h2v3h3zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"VideogameAsset"),M=[{name:"button.homePage",path:"/",alt:"Home",icon:e.jsx(ge,{})},{name:"button.shopPage",path:"/shop",alt:"Shop",icon:e.jsx(Se,{})},{name:"button.gamePage",path:"/game",alt:"Game",icon:e.jsx(Ce,{})},{name:"button.tutorialPage",path:"/tutorial",alt:"Creator Lab",icon:e.jsx(be,{})}],ke="ðŸ‡¬ðŸ‡§",ye="ðŸ‡»ðŸ‡³",we=[{name:"en",icon:ke},{name:"vn",icon:ye}];function Y(){const t=document.cookie;return t==""?null:t.split(";").reduce((c,r)=>{const[l,u]=r.split("=");return c[l.replace(" ","")]=u,c},{})}const Le="https://luckybrickserver.onrender.com/",Me=async t=>{try{const o=await fetch(Le+"users/logout",{method:"POST",credentials:"include"});if(o.ok){const d=await o.json();if(d.status){const c=Y();if(c){const r=new Date(Date.now()-1e3);for(const l in c)document.cookie=`${l}="";expires=${r};`}t.onSuccess(d.data.message[0])}else throw new Error("server err")}}catch(o){console.log(o),t.onFail()}};function Ie(t){return e.jsx("div",{style:{float:"left"},children:e.jsxs(U,{height:"20px",direction:"row",children:[e.jsx(i,{sx:{maxWidth:"50px",backgroundColor:"#0A47A9",padding:"0 2px 0 2px",borderRadius:"5px 0 0 5px"},display:"flex",justifyContent:"center",alignItems:"center",children:e.jsx(x,{color:"textPrimary",fontWeight:"600",fontSize:"10px",children:t.text})}),e.jsx(i,{sx:{width:0,height:0,borderTop:"10px solid transparent",borderBottom:"10px solid transparent",borderLeft:"8px solid #0A47A9"}})]})})}const Ae="https://luckybrickserver.onrender.com/";function De(t){const o=s.useRef(""),d=A(),c=()=>{let r="",l="";return t.name&&t.price?(r="Lego",l="shop"):t.gametitle?(r="Game",l="game"):(r="Tutorial",l="tutorial"),o.current=`${l}/${t.id}`,e.jsxs(e.Fragment,{children:[e.jsx(Ie,{text:r}),e.jsx(x,{fontSize:"15px",paddingLeft:"5px",children:t.name?t.name:t.gametitle})]})};return e.jsx(i,{className:se.click,onClick:()=>d(o.current),children:e.jsxs(U,{direction:"row",justifyContent:"space-between",alignItems:"center",flexGrow:0,children:[e.jsxs(i,{sx:{width:{xs:"200px",md:"300px"}},children:[e.jsx(x,{component:"span",variant:"body2",margin:"0 0 10px 0",sx:{wordWrap:"break-word",overflowWrap:"break-word",whiteSpace:"normal"},children:e.jsx(c,{})}),t.price&&e.jsxs(i,{display:"flex",flexDirection:"row",alignItems:"center",gap:"15px",sx:{fontSize:"15px",lineHeight:"15px"},children:[e.jsxs(x,{sx:{color:"#B22222"},children:["$",Number(t.price)-Number(t.price)*Number(t.sale)]}),oe(t.timesale)&&e.jsxs(x,{sx:{textDecoration:"line-through",color:"rgba(211, 211, 211, 0.55)"},children:["$",t.price]})]})]}),e.jsx(i,{sx:{height:"50px"},border:"1px solid rgba(255, 255, 255, 0.23)",borderRadius:"4px",children:e.jsx("img",{style:{height:"100%",objectFit:"contain"},src:Ae+"storage/"+t.image_uploaded_png[0]})})]})})}const He=240,ze="https://luckybrickserver.onrender.com/",Pe=t=>{const o=s.useRef(null),[d,c]=s.useState(!1),{setSnack:r,setLogin:l}=s.useContext(N),u=A(),b=()=>{c(!0)},f=S=>{r({isOpen:!0,message:S}),l(!1),c(!1),u("/")},a=()=>{r({isOpen:!0,message:"Oop something happen please try again"})};return e.jsxs(e.Fragment,{children:[t.data&&t.data.name?e.jsx(j,{ref:o,sx:{minWidth:0,color:"#fff"},onClick:b,children:e.jsx(he,{children:t.data.name[0]})}):e.jsx(v,{to:"/signin",children:e.jsx(j,{sx:{minWidth:0,color:"#fff"},children:e.jsx(ve,{})})}),e.jsxs(ae,{id:"basic-menu",anchorEl:o.current,open:d,onClose:()=>c(!1),MenuListProps:{"aria-labelledby":"basic-button"},children:[e.jsx(k,{onClick:()=>{console.log("a")},children:"Profile"}),e.jsx(k,{onClick:()=>{console.log("a")},children:"My account"}),e.jsx(k,{onClick:()=>Me({onSuccess:f,onFail:a}),children:"Logout"})]})]})},Fe=s.memo(t=>{const[o,d]=s.useState(null),[c,r]=s.useState(!1),[l,u]=s.useState(null),b=async a=>{a.preventDefault();const m=`${new FormData(a.currentTarget).get("searchInput")}`;if(m=="null")return;const p=await re({url:ze+`legos/search?q=${encodeURIComponent(m.trim())}`,methoud:"get"});p.rows.length>0?d(p.rows):u(`Can't find: ${m}`),r(!1)},f=()=>{d(null),r(!0),u(null)};return e.jsxs(i,{sx:{padding:{xs:"10px 15px 0px 15px",md:"50px 22px 0px 22px"}},children:[e.jsx(x,{fontSize:"28px",lineHeight:{xs:"40px",md:"28px"},margin:"0 0 10px 0",children:"Search"}),e.jsx(i,{component:"form",onSubmit:a=>{b(a),f()},noValidate:!0,children:e.jsx(G,{children:e.jsx(ce,{id:"searchInput",type:"text",name:"searchInput",autoComplete:"searchInput",autoFocus:!0,label:"",sx:{margin:"0 0 10px 0",fontSize:"16px",lineHeight:"26px",width:"100%"},size:"small",slotProps:{input:{startAdornment:e.jsx(le,{sx:{height:"5px"},position:"start",children:e.jsx(K,{})})}},variant:"outlined"})})}),c?e.jsx(de,{}):e.jsx(I,{}),e.jsxs(i,{sx:{margin:"10px 0 0 0",padding:"5px"},gap:"10px",display:"flex",flexDirection:"column",border:"1px solid rgba(255, 255, 255, 0.23)",borderRadius:"4px",children:[e.jsx(x,{children:l}),e.jsx(i,{onClick:()=>t.setDrawer(!1),children:o&&o.map(a=>e.jsxs(e.Fragment,{children:[e.jsx(De,{...a},T()),e.jsx(I,{sx:{margin:"10px 0 10px 0"}},T())]}))})]})]})});function ut(){const{mode:t,setMode:o}=ee(),[d,c]=s.useState(!1),[r,l]=s.useState(!1),[u,b]=s.useState("en"),f=A(),{t:a,i18n:{changeLanguage:S}}=xe(),m=te(),[p,q]=s.useState(null),{isLogin:_,cart:g}=s.useContext(N),D=s.useRef(0),[J,H]=s.useState(!1),y=()=>{c(n=>!n)},z=()=>{l(n=>!n)};t!="dark"&&o("dark");const P=()=>e.jsx(G,{sx:{width:"50px"},variant:"standard",children:e.jsx(ie,{labelId:"language-select",id:"language-select",value:u,onChange:n=>{b(n.target.value),S(n.target.value)},children:we.map(n=>e.jsx(k,{value:n.name,children:n.icon},n.name))})}),Q=e.jsxs(i,{onClick:y,sx:{textAlign:"center"},children:[e.jsx(x,{variant:"h6",sx:{my:2,cursor:"pointer"},onClick:()=>f("/"),children:"LUCKY BRICK"}),e.jsx(I,{}),e.jsxs(me,{children:[M.map(n=>e.jsx(L,{disablePadding:!0,children:e.jsx(B,{onClick:()=>f(n.path),sx:{textAlign:"center"},children:e.jsx($,{primary:a(n.name)})})},n.alt)),p&&(p.role=="admin"?e.jsx(L,{sx:{textAlign:"center",display:"flex",justifyContent:"center"},disablePadding:!0,children:e.jsx(B,{onClick:()=>f("admin"),sx:{textAlign:"center"},children:e.jsx($,{primary:a("Admin")})})}):""),e.jsx(L,{sx:{textAlign:"center",display:"flex",justifyContent:"center"},disablePadding:!0,children:e.jsx(P,{})})]})]}),X=window!==void 0?()=>window.document.body:void 0,Z=()=>{const n=Y();q(n)},F=()=>{D.current<window.scrollY?H(!0):H(!1),D.current=window.scrollY};return s.useEffect(()=>(document.addEventListener("scrollend",F),()=>{document.removeEventListener("scrollend",F)}),[]),s.useEffect(()=>{Z()},[_]),e.jsxs(i,{className:"app-header",sx:{display:"flex"},children:[e.jsx(ne,{}),e.jsx(O,{className:"app-bar",sx:{position:{xs:"relative",md:"fixed"},background:"linear-gradient(to bottom,#0033A0, #001F3F)"},component:"nav",children:e.jsxs(pe,{children:[e.jsx(C,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:y,sx:{mr:2,display:{sm:"none"}},children:e.jsx(je,{})}),e.jsx(x,{variant:"h6",component:"div",fontFamily:"Modak",fontSize:"1.6rem",sx:{flexGrow:1,display:"block",cursor:"pointer"},onClick:()=>f("/"),children:"LUCKY BRICK"}),e.jsx(i,{sx:{display:"block",textAlign:"center"},children:e.jsx(C,{onClick:z,children:e.jsx(K,{})})}),e.jsxs(i,{sx:{display:{xs:"none",md:"block"}},children:[M.map((n,w)=>e.jsx(v,{to:n.path,children:e.jsx(j,{sx:{color:`${m.pathname==n.path?"#007bff":"#fff"}`},children:a(n.name)})},w+n.name)),p&&(p.role=="admin"?e.jsx(W,{href:"#admin",children:e.jsx(j,{sx:{color:`${m.pathname=="Admin"?"#007bff":"#fff"}`},children:a("Admin")})}):"")]}),e.jsxs(i,{sx:{display:"block"},children:[e.jsx(Pe,{data:p}),e.jsx(v,{to:"cart",children:e.jsx(j,{sx:{minWidth:0,color:"#fff"},children:e.jsx(R,{color:"secondary",badgeContent:g==null?void 0:g.length,max:999,children:e.jsx(E,{})})})})]}),e.jsx(i,{sx:{display:{xs:"none",sm:"block"},marginLeft:"6px",textAlign:"center"},children:e.jsx(P,{})})]})}),e.jsx(ue,{direction:"up",in:!J,mountOnEnter:!0,unmountOnExit:!0,children:e.jsxs(O,{position:"fixed",className:"app-bar",component:"nav",sx:{top:"auto",minHeight:"56px",bottom:0,background:"linear-gradient(to bottom,#0033A0, #001F3F)",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2)",display:{xs:"flex",md:"none"},flexDirection:"row",justifyContent:"space-around",alignItems:"center"},children:[M.map((n,w)=>e.jsxs(v,{to:n.path,style:{textDecoration:"none",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:`${m.pathname==n.path?"#007bff":"#fff"}`},children:[e.jsx(C,{children:n.icon}),e.jsx(x,{fontSize:"12px",fontWeight:600,lineHeight:"12px",children:a(n.name)})]},w+n.name)),p&&(p.role=="admin"?e.jsxs(W,{href:"#admin",sx:{textDecoration:"none"},children:[e.jsx(C,{sx:{color:`${m.pathname=="Admin"?"#007bff":"#fff"}`},children:e.jsx(fe,{})}),e.jsx(x,{color:`${m.pathname=="Admin"?"#007bff":"#fff"}`,fontSize:"12px",fontWeight:600,lineHeight:"12px",children:a("Admin")})]}):""),e.jsxs(v,{to:"cart",style:{textDecoration:"none",color:`${m.pathname=="/cart"?"#007bff":"#fff"}`,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx(j,{sx:{minWidth:0,color:"#fff"},children:e.jsx(R,{color:"secondary",badgeContent:g==null?void 0:g.length,max:999,children:e.jsx(E,{})})}),e.jsx(x,{fontSize:"12px",fontWeight:600,lineHeight:"12px",children:a("Cart")})]})]})}),e.jsx("nav",{children:e.jsx(V,{container:X,variant:"temporary",open:d,onClose:y,ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:He}},children:Q})}),e.jsx(V,{open:r,onClose:z,ModalProps:{keepMounted:!0},anchor:"right",sx:{display:"block","& .MuiDrawer-paper":{boxSizing:"border-box",width:{xs:"320px",sm:"400px",md:"463px"}}},children:e.jsx(Fe,{setDrawer:l})})]})}export{ut as default};
